{% extends "base.html" %}

{% block title %}Trang chủ - gporn.me{% endblock %}

{% block content %}
<div class="container">
    <!-- Video Filters -->
    <div class="video-filters">
        <div class="filter-buttons">
            <a href="{{ url_for('index', filter='all') }}" class="filter-btn {% if not request.args.get('filter') or request.args.get('filter') == 'all' %}active{% endif %}">
                <i class="fas fa-list"></i> Tất cả
            </a>
            <a href="{{ url_for('index', filter='popular') }}" class="filter-btn {% if request.args.get('filter') == 'popular' %}active{% endif %}">
                <i class="fas fa-fire"></i> Phổ biến
            </a>
            <a href="{{ url_for('index', filter='newest') }}" class="filter-btn {% if request.args.get('filter') == 'newest' %}active{% endif %}">
                <i class="fas fa-clock"></i> Mới nhất
            </a>
            {% if current_user.is_authenticated %}
			<a href="{{ url_for('index', filter='watched') }}" class="filter-btn {% if request.args.get('filter') == 'watched' %}active{% endif %}">
                <i class="fas fa-history"></i> Video đã xem
            </a>
			<a href="{{ url_for('index', filter='liked') }}" class="filter-btn {% if request.args.get('filter') == 'liked' %}active{% endif %}">
                <i class="fas fa-heart"></i> Video đã thích
            </a>
            <a href="#" class="filter-btn disabled">
                <i class="fas fa-list"></i> Your Playlist
            </a>
            {% endif %}
        </div>
    </div>
    
    {% if movies %}
    <div class="movie-grid">
        {% for movie in movies %}
        <div class="movie-card">
            <a href="{{ url_for('movie', movie_id=movie.id) }}">
                <div class="movie-poster">
                    <img src="{{ movie.poster_url or 'https://via.placeholder.com/300x450?text=No+Image' }}" alt="{{ movie.title }}">
                    <div class="movie-overlay">
                        <i class="fas fa-play"></i>
                    </div>
                    <div class="movie-views">
                        <i class="fas fa-eye"></i> {{ movie.views }}
                    </div>
                </div>
                <div class="movie-info">
                    <h3>{{ movie.title }}</h3>
                    {% if movie.category %}
                    <span class="movie-category">{{ movie.category.name }}</span>
                    {% endif %}
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <i class="fas fa-film"></i>
        <p>Chưa có phim nào.</p>
    </div>
    {% endif %}
</div>
{% endblock %}

